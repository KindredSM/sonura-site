---
import BaseLayout from './BaseLayout.astro';

interface Benefit {
  title: string;
  description: string;
}

interface UseCase {
  title: string;
  description: string;
}

interface FAQ {
  question: string;
  answer: string;
}

interface Props {
  feature: string;
  featureSlug: string;
  title: string;
  description: string;
  keywords: string;
  headline: string;
  subhead: string;
  ctaText: string;
  howItWorksTitle: string;
  howItWorksSteps: string[];
  benefits: Benefit[];
  useCases: UseCase[];
  faqs: FAQ[];
  trustItems?: string[];
  finalCtaTitle?: string;
  finalCtaButtonText?: string;
}

const {
  feature,
  featureSlug,
  title,
  description,
  keywords,
  headline,
  subhead,
  ctaText,
  howItWorksTitle,
  howItWorksSteps,
  benefits,
  useCases,
  faqs,
  trustItems = [],
  finalCtaTitle,
  finalCtaButtonText,
} = Astro.props;

const canonical = `https://sonurastudio.com/features/${featureSlug}/`;

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": `Sonura ${feature}`,
    "url": canonical,
    "applicationCategory": "MultimediaApplication",
    "description": description,
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://sonurastudio.com/" },
      { "@type": "ListItem", "position": 2, "name": "Features", "item": "https://sonurastudio.com/features/" },
      { "@type": "ListItem", "position": 3, "name": feature, "item": canonical }
    ]
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": faqs.map(faq => ({
      "@type": "Question",
      "name": faq.question,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": faq.answer
      }
    }))
  },
  {
    "@context": "https://schema.org",
    "@type": "HowTo",
    "name": howItWorksTitle,
    "step": howItWorksSteps.map((step, index) => ({
      "@type": "HowToStep",
      "position": index + 1,
      "text": step
    }))
  }
];
---

<BaseLayout
  title={title}
  description={description}
  keywords={keywords}
  canonical={canonical}
  ogTitle={title}
  ogDescription={description}
  jsonLd={jsonLd}
  bodyClass="feature-page"
>
  <style>
    .feature-grid { display: grid; grid-template-columns: 1fr; gap: 24px; }
    .usecase-grid { display: grid; grid-template-columns: 1fr; gap: 24px; }
    
    @media (min-width: 640px) {
      .feature-grid { grid-template-columns: repeat(2, 1fr); }
      .usecase-grid { grid-template-columns: repeat(2, 1fr); }
    }
    
    @media (min-width: 1024px) {
      .feature-grid { grid-template-columns: repeat(3, 1fr); }
    }

    .step-number {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 20px;
      flex-shrink: 0;
    }

    .step-connector {
      width: 2px;
      height: 32px;
      background: linear-gradient(to bottom, var(--primary), transparent);
      margin-left: 23px;
    }

    .benefit-card {
      padding: 32px;
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      transition: border-color 0.2s;
    }

    .benefit-card:hover {
      border-color: var(--primary);
    }

    .usecase-card {
      padding: 32px;
      background: rgba(124, 58, 237, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(124, 58, 237, 0.2);
    }
  </style>

  <section class="hero">
    <div class="hero-background">
      <div class="hero-gradient"></div>
      <div class="hero-noise"></div>
      <svg class="cable-svg" style="z-index: 1;">
        <defs>
          <linearGradient id="cableGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#7c3aed;stop-opacity:0.2" />
            <stop offset="50%" style="stop-color:#a78bfa;stop-opacity:0.6" />
            <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:0.2" />
          </linearGradient>
          <linearGradient id="cableGradient2" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#5b21b6;stop-opacity:0.2" />
            <stop offset="50%" style="stop-color:#7c3aed;stop-opacity:0.5" />
            <stop offset="100%" style="stop-color:#5b21b6;stop-opacity:0.2" />
          </linearGradient>
        </defs>
        <path d="M -50 100 C 100 500 400 200 800 50" stroke="url(#cableGradient1)" class="cable-path" fill="none" />
        <path d="M 1400 300 C 1000 700 800 500 400 900" stroke="url(#cableGradient2)" class="cable-path" fill="none" />
      </svg>
    </div>
    <div class="hero-content">
      <h1 class="headline reveal">{headline}</h1>
      <p class="subhead reveal" data-reveal-delay="0.06s" style="max-width: 70vw; margin-left: auto; margin-right: auto;">{subhead}</p>
      <div class="cta">
        <a class="button primary" href="https://app.sonurastudio.com" target="_blank" rel="noopener">{ctaText}</a>
        <a class="hero-beta-link" href="/features/">All Features â†’</a>
      </div>
    </div>
  </section>

  <section class="workflow" aria-labelledby="how-it-works-title">
    <div class="workflow-inner" style="max-width: 800px;">
      <h2 id="how-it-works-title" class="workflow-title reveal">{howItWorksTitle}</h2>
      <div style="display: flex; flex-direction: column; gap: 0; margin-top: 48px;">
        {howItWorksSteps.map((step, index) => (
          <div class="reveal" data-reveal-delay={`${0.08 * index}s`}>
            <div style="display: flex; align-items: flex-start; gap: 24px;">
              <div class="step-number">{index + 1}</div>
              <div style="padding-top: 10px;">
                <p style="font-size: 18px; line-height: 1.6; color: var(--fg);">{step}</p>
              </div>
            </div>
            {index < howItWorksSteps.length - 1 && <div class="step-connector"></div>}
          </div>
        ))}
      </div>
    </div>
  </section>

  <section style="padding: 80px 24px; background: rgba(0,0,0,0.2);" aria-labelledby="benefits-title">
    <div style="max-width: 1600px; margin: 0 auto;">
      <h2 id="benefits-title" class="workflow-title reveal" style="text-align: center; margin-bottom: 48px;">Why Use Sonura for {feature}</h2>
      <div class="feature-grid">
        {benefits.map((benefit, index) => (
          <div class="benefit-card reveal" data-reveal-delay={`${0.06 * index}s`}>
            <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px; color: var(--fg);">{benefit.title}</h3>
            <p style="color: var(--muted); line-height: 1.6;">{benefit.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section style="padding: 80px 24px;" aria-labelledby="usecases-title">
    <div style="max-width: 900px; margin: 0 auto;">
      <h2 id="usecases-title" class="workflow-title reveal" style="text-align: center; margin-bottom: 48px;">Use Cases</h2>
      <div class="usecase-grid">
        {useCases.map((useCase, index) => (
          <div class="usecase-card reveal" data-reveal-delay={`${0.06 * index}s`}>
            <h3 style="font-size: 18px; font-weight: 700; margin-bottom: 12px; color: var(--primary);">{useCase.title}</h3>
            <p style="color: var(--muted); line-height: 1.6;">{useCase.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="faq" id="faq" aria-labelledby="faq-title">
    <div class="faq-inner">
      <h2 id="faq-title" class="faq-title">{feature} FAQ</h2>
      <div class="faq-list">
        {faqs.map((faq, index) => (
          <details class="reveal" data-reveal-delay={`${0.03 * index}s`}>
            <summary>{faq.question}</summary>
            <p>{faq.answer}</p>
          </details>
        ))}
      </div>
    </div>
  </section>

  <section class="final-cta" aria-labelledby="final-cta-title">
    <div class="final-cta-inner">
      <h2 id="final-cta-title" class="final-cta-title reveal">{finalCtaTitle || `Start Using ${feature} Now`}</h2>
      <p class="final-cta-subtitle reveal" data-reveal-delay="0.06s">free to start. no credit card required.</p>
      <div class="final-cta-form reveal" data-reveal-delay="0.12s">
        <a class="button primary large" href="https://app.sonurastudio.com" target="_blank" rel="noopener">{finalCtaButtonText || `try ${feature.toLowerCase()} free`}</a>
      </div>
      {trustItems.length > 0 && (
        <div class="final-cta-trust reveal" data-reveal-delay="0.18s">
          {trustItems.map((item) => (
            <div class="trust-item"><i data-lucide="check"></i> <span>{item}</span></div>
          ))}
        </div>
      )}
    </div>
  </section>
</BaseLayout>

