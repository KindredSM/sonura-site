---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  description: string;
  keywords: string;
  canonicalURL: string;
  publishedTime: string;
  readingTime: string;
  ogDescription?: string;
  customStyles?: string;
  bodyClass?: string;
}

const {
  title,
  description,
  keywords,
  canonicalURL,
  publishedTime,
  readingTime,
  ogDescription,
  customStyles = '',
  bodyClass = ''
} = Astro.props;

const formattedDate = new Date(publishedTime).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": title,
    "description": description,
    "author": { "@type": "Organization", "name": "Sonura" },
    "publisher": {
      "@type": "Organization",
      "name": "Sonura",
      "logo": { "@type": "ImageObject", "url": "https://sonurastudio.com/demo-image.jpeg" }
    },
    "datePublished": publishedTime,
    "dateModified": publishedTime,
    "image": "https://sonurastudio.com/demo-image.jpeg"
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://sonurastudio.com/" },
      { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://sonurastudio.com/blog/" },
      { "@type": "ListItem", "position": 3, "name": title, "item": canonicalURL }
    ]
  }
];
---

<BaseLayout
  title={title}
  description={description}
  keywords={keywords}
  canonicalURL={canonicalURL}
  type="article"
  publishedTime={publishedTime}
>
  <style set:html={`
    @media (min-width: 1024px) {
      .blog-toc {
        display: block !important;
      }
    }
    .blog-toc::-webkit-scrollbar {
      width: 6px;
    }
    .blog-toc::-webkit-scrollbar-track {
      background: transparent;
    }
    .blog-toc::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.1);
      border-radius: 3px;
    }
    .blog-toc::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.2);
    }
    ${customStyles}
  `}></style>

  <div style="display: flex; max-width: 1280px; margin: 80px auto; padding: 0 24px; gap: 48px;">
    <article style="flex: 1; min-width: 0; color: var(--fg); line-height: 1.8;">
      <header style="margin-bottom: 48px;">
        <h1 style="font-size: 42px; font-weight: 800; margin-bottom: 16px; line-height: 1.2;">{title}</h1>
        <div style="color: var(--muted); font-size: 14px; margin-bottom: 24px;">
          <time datetime={publishedTime}>{formattedDate}</time> • {readingTime}
        </div>
        <p style="font-size: 20px; color: var(--muted); line-height: 1.6;">{description}</p>
      </header>

      <slot />

      <footer style="margin-top: 64px; padding-top: 32px; border-top: 1px solid rgba(255,255,255,0.1);">
        <p style="color: var(--muted); font-size: 14px;">
          <a href="/" style="color: var(--primary); text-decoration: none;">← Back to Home</a> | 
          <a href="/blog/" style="color: var(--primary); text-decoration: none;">More Blog Posts</a>
        </p>
      </footer>
    </article>

    <slot name="toc" />
  </div>

  <script type="application/ld+json" set:html={JSON.stringify(jsonLd)}></script>
</BaseLayout>

